---
title: js 执行过程
categories:
  - 前端
tags:
  - javascript;
date: 2020-06-05 15:34:33
---

## 编译型语言和解释性语言

大部分人编程都是用的高级语言(除去汇编和机器语言)，计算机不能直接理解高级语言，只能理解和运行机器语言，所以必须要把高级语言翻译成机器语言，计算机才能运行高级语言所编写的程序。
说到翻译，其实翻译的方式有两种，一个是编译，一个是解释。

### 编译型

编译型语言的程序在执行之前，需要通过编译系统编译，使其成为机器语言(字节码，二进制)，这样每次运行时就不需要编译了，执行速度快

### 解释性

解释型语言的程序执行之前，是不需要进行编译，但是发生在运行过程中也需要编译，不是直接编译成目标代码(二进制)，是编译成中间代码，再由解释器进行解释运行，一边编译一边解析。解释型语言每执行一次就要翻译一次，效率比较低。解释型语言慢，就是因为编译过程发生在执行过程中

### 对比

对于常见编译型语言（例如：Java）来说，编译步骤分为：词法分析->语法分析->语义检查->代码优化和字节码生成。

对于解释型语言（例如 JavaScript）来说，通过词法分析 -> 语法分析 -> 语法树，就可以开始解释执行了。

编译型与解释型，两者各有利弊。
前者程序执行速度快，同等条件下对系统要求较低，因此像开发操作系统、大型应用程序、数据库系统等时都采用它，像 C/C++、Pascal/Object Pascal（Delphi）等都是编译语言。
一些网页脚本、服务器脚本及辅助开发接口这样的对速度要求不高、对不同系统平台间的兼容性有一定要求的程序则通常使用解释性语言，如 JavaScript、VBScript、Perl、Python、Ruby、MATLAB 等等。

## js 执行

### 谁执行 js 脚本

Javascript 是运行在一个宿主环境中，宿主环境一般必须要做 2 件事情：

1. 解析 JS 代码，转换成可执行的机器语言 ===> Javascript 引擎
2. 暴露一些额外的对象（API，比如：setTimeout，HttpRequeust 等）,可以与 JS 代码做交互 ===> Javascript Runtime

常见的 JS 宿主环境有什么？

1. web 浏览器 chrome: v8 + runtime(异步 http 请求线程，事件触发线程，定时器线程提供的 API)
2. node.js v8 引擎 + 相关 API

在浏览器的页面中,只有一个线程在执行 js 脚本代码,就是 js 引擎线程,同时会存在的异步 http 请求线程，事件触发线程，定时器线程等，这些线程不参与脚本的解析和执行。js 引擎线程通过 EventLoop 机制，使得代码解析速度快，不会发生解析阻塞。

### 执行的过程


## 相关阅读

[https://www.zhihu.com/question/39499036](https://www.zhihu.com/question/39499036)
[AST](https://esprima.org/demo/parse.html#)
[js 有预编译吗](https://www.zhihu.com/question/29105940/answer/43277384)
[js执行过程](https://cloud.tencent.com/developer/article/1886888)
