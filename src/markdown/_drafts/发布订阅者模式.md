---
title: 发布订阅者模式
categories:
tags:
---

## 发布订阅

1、首先想好谁是发布者、谁是订阅者（例如 NBA 专栏就是发布者，NBA 球迷就是订阅者）

2、然后给发布者添加一个缓存列表，用于存放回调函数用来通知订阅者

3、最后就是发布消息，发布者者遍历这个缓存列表，一次触发订阅者的回调函数

emit： 触发，发射

## 通俗的解释

订阅就是将要做的事情先存储好，然后发布的时候让订阅的事情一次执行

## 代码

```javascript
let event = {
  arr: [], // 发布订阅，他们两者之间没有直接的联系，，，
  on(fn) {
    this.arr.push(fn);
  },
  emit() {
    this.arr.forEach((fn) => fn());
  },
};

e.on();
e.on();
e.on();
```

## 观察者模式和发布订阅 之间有什么关系

观察者模式（内部是基于发布订阅的） ，有一个观察者 被观察者

发布订阅，他们两者之间没有直接的联系

## 相关阅读

[掘金-发布-订阅](https://juejin.im/post/6844903928413306887)
[b 站视频](https://www.bilibili.com/video/BV18C4y147t9?p=1)
